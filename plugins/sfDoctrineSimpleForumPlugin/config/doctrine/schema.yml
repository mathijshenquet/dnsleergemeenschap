sfDoctrineSimpleForumCategory:
  actAs: [Timestampable, SoftDelete, Sluggable]
  tableName: sf_doctrine_simple_forum_category
  columns:
    id: { type: integer(4), primary: true, autoincrement: true }
    name: { type: string }
    stripped_name: { type: string }
    description: { type: string }
    rank: { type: integer } 
sfDoctrineSimpleForumForum:
  actAs: [Timestampable, SoftDelete, Sluggable]
  tableName: sf_doctrine_simple_forum_forum
  columns:
    id: { type: integer(4), primary: true, autoincrement: true }
    name: { type: string }
    description: { type: string }
    rank: { type: integer }
    category_id: { type: integer(4) }
    # Performance Enhancers
    stripped_name: { type: string(255) }
    latest_post_id: { type: integer(4) }
    nb_posts: { type: integer(4) }
    nb_topics: { type: integer(4) }
  relations:
    sfDoctrineSimpleForumCategory:
      local: category_id
      foreign: id
      onDelete: cascade
      alias: Category
      foreignAlias: Forums
    sfDoctrineSimpleForumPost:
      local: latest_post_Id
      foreign: id
      alias: LastPost
      foreignAlias: Forum
sfDoctrineSimpleForumTopic:
  actAs: [Timestampable, SoftDelete,Sluggable]
  tableName: sf_doctrine_simple_forum_topic
  columns:
    id: { type: integer(4), primary: true, autoincrement: true }
    title: { type: string(255) }
    is_sticked: { type: boolean, default: false }
    is_locked: { type: boolean, default: false }
    forum_id: { type: integer(4) }    
    # performance enhancers
    latest_post_id: { type: integer(4) }
    user_id:       { type: integer(4) }
    stripped_title: { type: string(255) }
    nb_posts:      { type: integer(4), default: 0 }
    nb_views:      { type: integer(10), default: 0 }
  relations:
    sfDoctrineSimpleForumForum:
      alias: Forum
      local: forum_id
      foreign: id
      onDelete: cascade
    sfGuardUser:
      alias: User
      foreignAlias: Topics
      local: user_id
      foreign: id

sfDoctrineSimpleForumPost:
  actAs: [Timestampable, SoftDelete]
  tableName: sf_doctrine_simple_forum_post
  columns:
    id: { type: integer(4), primary: true, autoincrement: true }
    title: { type: string(255) }
    content: { type: string }
    topic_id: { type: integer(4) }
    is_reply_to_comment: { type: integer(1), default: 0 }
    reply_id: { type: integer(10) }
    user_id: { type: integer(4) }
    # performance enhancers
    forum_id: { type: integer(4) }
  relations:
    sfDoctrineSimpleForumTopic:
      alias: Topic
      foreignAlias: Posts
      local: topic_id
      foreign: id
      onDelete: cascade
    sfGuardUser:
      foreignAlias: Posts
      alias: User
      local: user_id
      foreign: id
      onDelete: cascade
sfDoctrineSimpleForumTopicView:
  actAs: [Timestampable, SoftDelete]
  tableName: sf_doctrine_simple_forum_topic_view
  columns:
    id: { type: integer(4), primary: true, autoincrement: true }
    user_id: { type: integer(4), primary: true }
    topic_id : {type: integer(4), primary: true }
  relations:
    sfGuardUser:
      local: user_id
      local: id
      onDelete: cascade
    sfDoctrineSimpleForumTopic:
      local: topic_id
      foreign: id
      onDelete: cascade